<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>@textile/threads</title>
	<meta name="description" content="Documentation for @textile/threads">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.json" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">@textile/threads</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="globals.html">Globals</a>
				</li>
			</ul>
			<h1>@textile/threads</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<a href="#textile39s-threads-protocol-amp-database-js-threads" id="textile39s-threads-protocol-amp-database-js-threads" style="color: inherit; text-decoration: none;">
					<h1>Textile&#39;s Threads protocol &amp; database <em>(js-threads)</em></h1>
				</a>
				<p><a href="https://textile.io"><img src="https://img.shields.io/badge/made%20by-Textile-informational.svg" alt="Textile"></a>
					<a href="https://slack.textile.io"><img src="https://img.shields.io/badge/slack-slack.textile.io-informational.svg" alt="Slack"></a>
					<a href="./LICENSE"><img src="https://img.shields.io/github/license/textileio/js-threads.svg" alt="License"></a>
					<a href="https://github.com/textileio/js-threads/releases/latest"><img src="https://img.shields.io/github/release/textileio/js-threads.svg" alt="Release"></a>
					<a href="https://github.com/RichardLitt/standard-readme"><img src="https://img.shields.io/badge/readme-OK-green.svg" alt="Readme"></a>
				<a href="https://lerna.js.org/"><img src="https://img.shields.io/badge/monorepo-lerna-cc00ff.svg" alt="Lerna"></a></p>
				<p><img src="https://github.com/textileio/js-threads/workflows/Test/badge.svg" alt="Tests">
				<a href="https://textileio.github.io/js-threads"><img src="https://github.com/textileio/js-threads/workflows/Docs/badge.svg" alt="Docs"></a></p>
				<blockquote>
					<p>A protocol &amp; event-sourced database for decentralized user-siloed data written in Typescript</p>
				</blockquote>
				<a href="#using-threads" id="using-threads" style="color: inherit; text-decoration: none;">
					<h2>Using Threads</h2>
				</a>
				<p>To get started using Threads, check out the <a href="https://docs.textile.io/">docs site</a> and <a href="https://textileio.github.io/js-threads">API documentation</a>.</p>
				<a href="#getting-help" id="getting-help" style="color: inherit; text-decoration: none;">
					<h2>Getting help</h2>
				</a>
				<p>The Textile/Threads developers/community are active on <a href="https://slack.textile.io/">Slack</a> and <a href="https://twitter.com/textileio">Twitter (@textileio)</a>, join us there for news, discussions, questions, and status updates. Also, <a href="https://blog.textile.io">check out our blog</a> for the latest posts and announcements.</p>
				<p>If you think you&#39;ve found a bug in Threads, please file a Github issue. Take a look at our comprehensive <a href="#contributing">contributor guide</a> for details on how to get started.</p>
				<a href="#table-of-contents" id="table-of-contents" style="color: inherit; text-decoration: none;">
					<h2>Table of Contents</h2>
				</a>
				<ul>
					<li><a href="#textiles-threads-protocol--database-js-threads">Textile&#39;s Threads protocol &amp; database <em>(js-threads)</em></a><ul>
							<li><a href="#using-threads">Using Threads</a></li>
							<li><a href="#getting-help">Getting help</a></li>
							<li><a href="#background">Background</a><ul>
									<li><a href="#overview">Overview</a></li>
								</ul>
							</li>
							<li><a href="#install">Install</a></li>
							<li><a href="#usage">Usage</a></li>
							<li><a href="#authentication">Authentication</a></li>
							<li><a href="#developing">Developing</a></li>
							<li><a href="#releasing">Releasing</a></li>
							<li><a href="#api">API</a></li>
							<li><a href="#maintainers">Maintainers</a></li>
							<li><a href="#contributing">Contributing</a></li>
							<li><a href="#license">License</a></li>
						</ul>
					</li>
				</ul>
				<a href="#background" id="background" style="color: inherit; text-decoration: none;">
					<h2>Background</h2>
				</a>
				<p>Textile&#39;s Threads Protocol and Database provides an alternative architecture for data on the web. Threads aims to help power a new generation of web technologies by combining a novel use of event sourcing, Interplanetary Linked Data (IPLD), and access control to provide a distributed, scalable, and flexible database solution for decentralized applications. Threads is backed by a great deal of research and experience, and provides protocols for securely storing and sharing content-addressable data (on IPFS), with tooling to help standardize data creation and dissemination.</p>
				<p>Want something specific? Take a look at our <a href="#contributing">contributor guide</a> for details on how to ask for features, or better yet, submit a PR yourself :wink:!</p>
				<a href="#overview" id="overview" style="color: inherit; text-decoration: none;">
					<h3>Overview</h3>
				</a>
				<a href="#install" id="install" style="color: inherit; text-decoration: none;">
					<h2>Install</h2>
				</a>
				<p><code>js-threads</code> is implemented as a series of sub-packages. For general use, you can get most of what you need by simply installing and using the <code>@textile/threads</code> library.</p>
				<pre><code class="language-shell">npm install --save @textile/threads</code></pre>
				<p>If you are running <code>js-threads</code> in an environment that does not support <a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API">WebSockets</a> by default (such as Node), be sure to include it explicitly using something like the following at the top of your script or module:</p>
				<pre><code class="language-javascript"><span class="hljs-comment">// Add WebSocket to the global namespace on Node</span>
<span class="hljs-built_in">global</span>.WebSocket = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;isomorphic-ws&#x27;</span>)</code></pre>
				<a href="#usage" id="usage" style="color: inherit; text-decoration: none;">
					<h2>Usage</h2>
				</a>
				<p>For an introduction to use the <code>Database</code> classe, read the <a href="https://docs.textile.io/threads/">Threads Introduction here</a>. Additionally, there are a growing list of <a href="https://github.com/textileio/js-examples">examples</a> available.</p>
				<a href="#authentication" id="authentication" style="color: inherit; text-decoration: none;">
					<h2>Authentication</h2>
				</a>
				<p>Textile provides remote Threads APIs you can use when developing your app. See <a href="https://textileio.github.io/js-hub"><code>@textile/hub</code></a> (or <a href="https://docs.textile.io">docs.textile.io</a>) for details on authenticating with these APIs, and how to set up your own local development peer.</p>
				<a href="#developing" id="developing" style="color: inherit; text-decoration: none;">
					<h2>Developing</h2>
				</a>
				<p>Underlying the Threads Database are a number of ideas and technologies, which are outlined in detail in the <a href="https://github.com/textileio/papers">Threads whitepaper</a>. These components are all housed within this <a href="https://en.wikipedia.org/wiki/Monorepo">mono-repo</a>, and include a set of <a href="./packages/core">core modules</a> for creating Thread identities and keys (<code>@textile/threads-core</code>), as well as tooling for data <a href="./packages/encoding">encryption and encoding</a> (<code>@textile/threads-encoding</code>), networking (with support for <a href="./packages/network">local</a> (<code>@textile/threads-network</code>) and <a href="./packages/network-client">remote</a> (<code>@textile/threads-network-client</code>) key management), and a local-first, event-sourced <a href="./packages/store">storage layer</a> (<code>@textile/threads-store</code>). There are also two entry points for running Threads DB, including a <a href="./packages/database">local-first Javascript <em>module</em></a> (<code>@textile/threads-database</code>), and a <a href="./packages/client">remote-only, Javascript <em>client</em></a> (<code>@textile/threads-client</code>).</p>
				<p>This mono-repo is all managed by <a href="https://github.com/lerna/lerna">lerna</a>. You shouldn&#39;t have to do anything special to get started, however, here are a few steps that will make it easier to develop new functionality locally.</p>
				<pre><code class="language-shell">git clone git@github.com:textileio/js-threads.git
cd js-threads
npm install
npm run bootstrap</code></pre>
				<p>Then you are pretty much ready to go. You can run tests for all sub-packages from the root directory:</p>
				<pre><code class="language-bash">npm <span class="hljs-built_in">test</span>
<span class="hljs-comment"># Or run the node- or browser-specific tests separately</span>
npm run <span class="hljs-built_in">test</span>:node
npm run <span class="hljs-built_in">test</span>:browser</code></pre>
				<p>Similarly, you can compile the Typescript-based sub-packages to Javascript all at once.</p>
				<pre><code class="language-bash">npm run build</code></pre>
				<a href="#browsers" id="browsers" style="color: inherit; text-decoration: none;">
					<h3>Browsers</h3>
				</a>
				<p>If you&#39;d like to build browser bundles (say, using webpack), you may want to use something like the following in your <code>webpack.config.js</code>. Note however, that if you are working with a framework such as React or Angular, you might be better off letting that bundler handle the tree-shaking etc for you!</p>
				<pre><code class="language-javascript"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>)

<span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">entry</span>: <span class="hljs-string">&#x27;./src/index.ts&#x27;</span>,
  <span class="hljs-attr">devtool</span>: <span class="hljs-string">&#x27;inline-source-map&#x27;</span>,
  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">rules</span>: [
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.tsx?$/</span>,
        use: <span class="hljs-string">&#x27;ts-loader&#x27;</span>,
        <span class="hljs-attr">exclude</span>: <span class="hljs-regexp">/node_modules/</span>,
      },
    ],
  },
  <span class="hljs-attr">resolveLoader</span>: {
    <span class="hljs-attr">modules</span>: [<span class="hljs-string">&#x27;../../node_modules&#x27;</span>],
  },
  <span class="hljs-attr">resolve</span>: {
    <span class="hljs-attr">modules</span>: [<span class="hljs-string">&#x27;./node_modules&#x27;</span>],
    [<span class="hljs-string">&#x27;.tsx&#x27;</span>, <span class="hljs-string">&#x27;.ts&#x27;</span>, <span class="hljs-string">&#x27;.js&#x27;</span>, <span class="hljs-string">&#x27;json&#x27;</span>],
    <span class="hljs-attr">symlinks</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">output</span>: {
    <span class="hljs-attr">filename</span>: <span class="hljs-string">&#x27;./[name].js&#x27;</span>,
    <span class="hljs-attr">path</span>: path.resolve(process.cwd(), <span class="hljs-string">&#x27;dist&#x27;</span>),
    <span class="hljs-attr">library</span>: <span class="hljs-string">&#x27;threads&#x27;</span>,
    <span class="hljs-attr">libraryTarget</span>: <span class="hljs-string">&#x27;var&#x27;</span>,
  },
  <span class="hljs-attr">optimization</span>: {
    <span class="hljs-attr">splitChunks</span>: {
      <span class="hljs-attr">chunks</span>: <span class="hljs-string">&#x27;all&#x27;</span>,
    },
    <span class="hljs-attr">minimize</span>: <span class="hljs-literal">true</span>,
  },
}</code></pre>
				<p>The the bundle(s) can be built with:</p>
				<pre><code class="language-bash"><span class="hljs-built_in">cd</span> packages/threads
webpack --mode production --config webpack.config.js</code></pre>
				<a href="#typescript" id="typescript" style="color: inherit; text-decoration: none;">
					<h3>Typescript</h3>
				</a>
				<p>This project also uses incremental Typescript builds, so to take advantage of that (rather than building from scratch each time) use <code>compile</code>. You should notice significant speed-ups in your build process:</p>
				<pre><code class="language-shell">npm run compile</code></pre>
				<a href="#releasing" id="releasing" style="color: inherit; text-decoration: none;">
					<h2>Releasing</h2>
				</a>
				<p>This project utilises lerna&#39;s &#39;independent&#39; release mode. So each time you run <code>lerna publish</code>, it will check for local updates and determine which packages have changed and need publishing. To do this locally, follow these steps:</p>
				<ol>
					<li>Ensure you are on a clean master branch (we only want to release from master). If you have to, run <code>lerna clean &amp;&amp; lerna bootstrap</code> to get to a clean state. If this produces new changes, then make sure you commit these (or reject them) before proceeding.</li>
					<li>Ensure that webpack and webpack-cli are available. Ideally, install these globally. It is also a good idea to have typescript available globally. <code>npm i -g webpack webpack-cli typescript</code></li>
					<li>Ensure your git config does not specify signed tags. The <code>lerna</code> cli tool does not seem to be able to handle these at this time.</li>
					<li>Ensure you are logged in to an npmjs.org account that has permission to publish to the @textile org/scope.</li>
					<li>Run <code>lerna publish</code>, and sit back and wait. Ideally, this will go off without a hitch.</li>
				</ol>
				<p>If it fails after creating tags and/or pushing the version updates to git, but before the actual npm publish completes, you should be able to &#39;recover&#39; by running <code>lerna publish from-package</code>, which will attempt to publish new releases based on the versions available on npmjs.org. If it failed before or during tag creation, you might have to start over by dropping the version updates (<code>git checkout -- .</code>) and trying again. If <code>lerna</code> managed to <em>commit</em> the changes, you can use something like <code>git reset --hard HEAD~1</code> to reset the last commit, followed by <code>git push --force --follow-tags</code> (if it was pushed to remote already and you are allowed to do pushes to master), <strong>but check that the right commit was reverted first</strong>.</p>
				<p>See the <a href="https://github.com/lerna/lerna#what-can-lerna-do">lerna docs</a> for other things you can do to make working across multiple packages easier. <strong>Note</strong>: If you are using <code>lerna</code> commands directly (as opposed to the ones wrapped in the package.json scripts), you&#39;ll want to install <code>lerna</code> globally to make your life easier: <code>npm i -g lerna</code>.</p>
				<a href="#api" id="api" style="color: inherit; text-decoration: none;">
					<h2>API</h2>
				</a>
				<p>See <a href="https://textileio.github.io/js-threads">https://textileio.github.io/js-threads</a>, which includes the technical API docs for all subpackages.</p>
				<a href="#maintainers" id="maintainers" style="color: inherit; text-decoration: none;">
					<h2>Maintainers</h2>
				</a>
				<p><a href="https://github.com/carsonfarmer">Carson Farmer</a></p>
				<a href="#contributing" id="contributing" style="color: inherit; text-decoration: none;">
					<h2>Contributing</h2>
				</a>
				<p>PRs gratefully accepted! Please see <a href="./CONTRIBUTING.md">the contributing guide</a> for details on getting started.</p>
				<p>Small note: If editing the README, please conform to the <a href="https://github.com/RichardLitt/standard-readme">standard-readme</a> specification.</p>
				<a href="#license" id="license" style="color: inherit; text-decoration: none;">
					<h2>License</h2>
				</a>
				<p><a href="./LICENSE">MIT</a> (c) 2019-2020 Textile</p>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="globals  ">
						<a href="globals.html"><em>Globals</em></a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_textile_security.html">@textile/security</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_textile_threads.html">@textile/threads</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_textile_threads_client.html">@textile/threads-<wbr>client</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_textile_threads_crypto.html">@textile/threads-<wbr>crypto</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_textile_threads_database.html">@textile/threads-<wbr>database</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_textile_threads_id.html">@textile/threads-<wbr>id</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer>
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-object-literal"><span class="tsd-kind-icon">Object literal</span></li>
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
				<li class="tsd-kind-type-alias tsd-has-type-parameter"><span class="tsd-kind-icon">Type alias with type parameter</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
				<li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
				<li class="tsd-kind-class tsd-has-type-parameter"><span class="tsd-kind-icon">Class with type parameter</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
</body>
</html>